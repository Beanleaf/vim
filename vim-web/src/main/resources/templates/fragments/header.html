<!DOCTYPE HTML>
<html lang="en" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:th="http://www.thymeleaf.org">
<!--/*@thymesVar id="activeUser" type="be.beanleaf.vim.domain.entities.User"*/-->
<head th:fragment="htmlHead" th:remove="tag">
  <!--/*@thymesVar id="defaultEncoding" type="java.lang.String"*/-->
  <meta th:charset="${defaultEncoding}">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="ie=edge" http-equiv="X-UA-Compatible">
  <title th:text="#{application.title} + ' - ' + #{application.subtitle}">
    application.title - application.subtitle
  </title>
  <link rel="stylesheet" th:href="@{/css/vim.css}"/>
  <link rel="stylesheet" th:href="@{/webjars/octicons/4.3.0/build/font/octicons.css}"/>
  <link rel="icon" th:href="@{/favicon.ico}"/>
</head>

<section th:fragment="baseElements" th:if="${toastMessage != null or feedbackmessage != null}">
  <!--/*@thymesVar id="toastMessage" type="be.beanleaf.vim.app.utils.ToastMessage"*/-->
  <div th:if="${toastMessage}" class="p-1 position-fixed bottom-0 left-0 mb-3 ml-3">
    <div class="Toast Toast--animateIn"
         th:classappend="'Toast--' + ${toastMessage.getType().getCssClass()}">
      <span class="Toast-icon"><i class="octicon"
                                  th:classappend="'octicon-' + ${toastMessage.getType().getIconClass()}"></i></span>
      <span class="Toast-content" th:text="#{${toastMessage.getMessagePropertie()}}">toastMessage.getMessage()</span>
      <button th:if="${toastMessage.isCloseable()}" class="Toast-dismissButton js-toast-close"><i
          class="octicon octicon-x"></i></button>
    </div>
  </div>

  <!--/*@thymesVar id="feedbackmessage" type="be.beanleaf.vim.app.utils.Feedbackmessage"*/-->
  <div class="flash position-fixed top-0 m-3 z-99" th:if="${feedbackmessage}"
       th:classappend="'flash-' + ${feedbackmessage.getType().getCssClass()}">
    <button class="flash-close js-flash-close" th:if="${feedbackmessage.isCloseable()}"
            type="button"><i class="octicon octicon-x"></i></button>
    <p>
      <span th:text="${feedbackmessage.getMessage()}" th:unless="${feedbackmessage.isValidation()}">Feedback message</span>
      <span th:if="${feedbackmessage.isValidation()}"
            th:text="#{__${feedbackmessage.getMessage()}__}">Feedback message</span>
    </p>
    <p th:if="${!feedbackmessage.isValidation() and !#strings.isEmpty(feedbackFooter)}"
       th:text="${feedbackFooter}"
       th:with="feedbackFooter=#{error.footer}">
    </p>
    <pre th:if="${feedbackmessage.getStackTrace()}"><code
        th:text="${feedbackmessage.getStackTrace()}"></code></pre>
  </div>
</section>

<!-- Navigation -->
<header class="topbar p-responsive d-flex flex-justify-between flex-items-center"
        th:fragment="topBar">
  <div class="text-white">
    <i class="logo octicon octicon-repo-clone"></i>
  </div>
  <div class="search ml-3" sec:authorize="hasAuthority('ADMIN')">
    <form method="get" th:action="@{/admin/inventory/history/}">
      <input class="form-control input-block input-sm" name="q"
             th:placeholder="#{inventory.history.search}"
             autocomplete="off" type="text"/>
    </form>
  </div>
  <nav class="navigation flex-auto text-left ml-3">
    <a class="navlink" th:href="@{/}" th:text="#{navigation.home}">navigation.home</a>
    <a class="navlink" sec:authorize="hasAuthority('ADMIN')" th:href="@{/admin/inventory/history}"
       th:text="#{inventory.history}">inventory.history</a>
    <a class="navlink" sec:authorize="hasAuthority('ADMIN')" th:href="@{/admin/inventory}"
       th:text="#{navigation.inventoryManagement}">navigation.inventoryManagement</a>
    <a class="navlink" sec:authorize="hasAuthority('ADMIN')" th:href="@{/admin/users}"
       th:text="#{navigation.userManagement}">navigation.userManagement</a>
  </nav>
  <div class="userutils text-right" th:with="webUtils=${T(be.beanleaf.vim.app.utils.WebUtils)}">
    <a class="navlink" th:href="@{/login}" th:if="!${activeUser}" th:text="#{navigation.login}">navigation.login</a>
    <div th:if="${activeUser}">
      <span class="position-relative pr-2 text-white" th:text="${activeUser.getName()}">activeUser.getName()</span>

      <details class="dropdown details-reset details-overlay d-inline-block">
        <summary class="text-white">
          <img class="mr-2 v-align-middle" height="20"
               th:src="${webUtils.getGravatarImgSrc(activeUser.getEmailAddress(),20, 'identicon')}"
               width="20"/>
          <div class="dropdown-caret"></div>
        </summary>

        <ul class="dropdown-menu dropdown-menu-sw text-left">
          <li><a class="dropdown-item btn-icon" th:href="@{/logout}"
                 th:label="#{navigation.logout}">
            <i class="octicon octicon-sign-out"></i>
            <span th:text="#{navigation.logout}"></span>
          </a></li>
          <li class="dropdown-divider"></li>
          <li>
            <a class="dropdown-item" th:href="@{/profile}" th:text="#{navigation.profile}">My
              profile</a>
          </li>
        </ul>
      </details>
    </div>
  </div>
</header>

</html>